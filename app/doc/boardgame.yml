---
openapi: 3.0.3
servers:
- url: /api
components:
  parameters:
    user:
      description: Selected User
      in: path
      name: user
      required: true
      schema:
        type: string
    game:
      description: Selected Game
      in: path
      name: game
      required: true
      schema:
        type: string
    gametype:
      description: Selected GameType
      in: path
      name: game
      required: true
      schema:
        type: string
  schemas:
    User:
      properties:
        id:
          description: User id, unique
          type: number
          format: int
        name:
          description: User name, unique
          type: string
        password:
          description: User password
          type: string
      required:
      - id
      - name
      - password
      type: object
    Game:
      properties:
        id:
          description: Game id, unique
          type: number
          format: int
        type:
          description: Game type
          type: number
          format: int
      required:
      - id
      - type
      type: object
    GameType:
      properties:
        id:
          description: GameType id, unique
          type: number
          format: int
        name:
          description: Game name, unique
          type: string
      required:
      - id
      - name
      type: object
  securitySchemes:
info:
  title: PWP BoardGame
  version: 0.0.1
  description: |
    This is an API used in the Programmable Web Project course.
    It stores data about games and the users who have played them.
  termsOfService: http://totally.not.placehold.er/
  contact:
    url: http://totally.not.placehold.er/
    email: realaddress@email.net
    name: Boardgame group
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
paths:
  /users/:
    get:
      description: Get a list of all users. User passwords not included
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:add-user:
                    encoding: json
                    href: /api/users/
                    method: POST
                    schema:
                      properties:
                        name:
                          maxLength: 64
                          minLength: 1
                          type: string
                        password:
                          type: string
                      required:
                      - name
                      - password
                      type: object
                  boardgame:games-all:
                    href: /api/games/
                    method: GET
                  boardgame:gametypes-all:
                    href: /api/game_types/
                    method: GET
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                items:
                - '@controls':
                    self:
                      href: /api/users/user1
                  name: user1
                - '@controls':
                    self:
                      href: /api/users/user2
                  name: user2
                - '@controls':
                    self:
                      href: /api/users/user3
                  name: user3
  /users/{user}/:
    get:
      description: Get an user's information. Requires an user to be logged in.
      responses:
        '200':
          description: Info successfully returned
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:delete:
                    href: /api/users/user1
                    method: DELETE
                  boardgame:users-all:
                    href: /api/users/
                    method: GET
                  edit:
                    encoding: json
                    href: /api/users/user1
                    method: PUT
                    schema:
                      properties:
                        name:
                          maxLength: 64
                          minLength: 1
                          type: string
                        password:
                          type: string
                      required:
                      - name
                      - password
                      type: object
                games:
                - '@controls':
                    self:
                      href: /api/games/4b569771967645a6978dc71904abc470
                  id: 4b569771967645a6978dc71904abc470
                  result: -1
                  type: 1
                name: user1
                totalTime: 0
                turnsPlayed: 0
        '403':
          description: Permission denied (you need to be logged in)
        '404':
          description: User not found
  /games/:
    get:
      description: Get a list of all games
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:add-game:
                    encoding: json
                    href: /api/games/
                    method: POST
                    schema:
                      properties:
                        type:
                          type: string
                        user:
                          type: string
                      required:
                      - type
                      - user
                      type: object
                  boardgame:gametypes-all:
                    href: /api/game_types/
                    method: GET
                  boardgame:get-random:
                    href: /api/games/random/tictactoe
                  boardgame:users-all:
                    href: /api/users/
                    method: GET
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                items:
                - '@controls':
                    self:
                      href: /api/games/15bd5a922e1b48ef9411b0d357660b73
                  currentPlayer: user1
                  id: 15bd5a922e1b48ef9411b0d357660b73
                  result: -1
                  state: 1---------
                  type: tictactoe
  /games/{game}/:
    get:
      description: Get information about a game instance
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:delete:
                    href: /api/games/15bd5a922e1b48ef9411b0d357660b73
                    method: DELETE
                  boardgame:games-all:
                    href: /api/games/
                    method: GET
                  boardgame:join-game:
                    href: /api/games/15bd5a922e1b48ef9411b0d357660b73/join
                    method: POST
                  boardgame:make-move:
                    encoding: json
                    href: /api/games/15bd5a922e1b48ef9411b0d357660b73/moves
                    method: POST
                    schema:
                      properties:
                        moveTime:
                          type: integer
                      required:
                      - move
                      - moveTime
                      type: object
                  edit:
                    encoding: json
                    href: /api/games/15bd5a922e1b48ef9411b0d357660b73
                    method: PUT
                    schema:
                      properties:
                        currentPlayer:
        '404':
          description: Game instance not found
  /games/{game}/moves/:
    get:
      description: get the move history of a given game instance
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  up:
                    href: /api/games/15bd5a922e1b48ef9411b0d357660b73
                moveHistory: None
        '404':
          description: Game instance not found
  /games/{game}/join/:
    post:
      description: Try to join a game instance. Returns an error if the game already has a player
      responses:
        '200':
          description: Game joined succesfully
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:make-move:
                    encoding: json
                    href: /api/games/4b569771967645a6978dc71904abc470/moves
                    method: POST
                    schema:
                      properties:
                        moveTime:
                          type: integer
                      required:
                      - move
                      - moveTime
                      type: object
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                ok: Ok
        '404':
          description: Game not found
        '409':
          description: Game already has a player
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:games-all:
                    href: /api/games/
                    method: GET
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                error: Game already has a player
  /games/random/{game_type}/:
    get:
      description: Redirects to the id of an random game with no current player. Should not be spammed!!! Creates a bunch of new games.
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:join-game:
                    href: /api/games/69a25cc03b314b5ca2d56fc8f80ffaeb/join
                    method: POST
                '@namespaces':
                  boardgame:
                    name: /boardgame/
        '404':
          description: Game type not found
  /game_types/:
    get:
      description: Get a list of all game types.
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:add-gametype:
                    encoding: json
                    href: /api/game_types/
                    method: POST
                    schema:
                      properties:
                        defaultState:
                          maxLength: 256
                          type: string
                        name:
                          maxLength: 64
                          minLength: 1
                          type: string
                      required:
                      - name
                      - defaultState
                      type: object
                  boardgame:games-all:
                    href: /api/games/
                    method: GET
                  boardgame:users-all:
                    href: /api/users/
                    method: GET
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                items:
                - '@controls':
                    self:
                      href: /api/game_types/tictactoe
                  defaultState: 1---------
                  name: tictactoe
  /game_types/{game_type}/:
    get:
      description: Get a game_type's information
      responses:
        '200':
          content:
            application/vnd.mason+json:
              example:
                '@controls':
                  boardgame:delete:
                    href: /api/game_types/tictactoe
                    method: DELETE
                  boardgame:gametypes-all:
                    href: /api/game_types/
                    method: GET
                  boardgame:get-random:
                    href: /api/games/random/tictactoe
                    method: GET
                  edit:
                    encoding: json
                    href: /api/game_types/tictactoe
                    method: PUT
                    schema:
                      properties:
                        defaultState:
                          maxLength: 256
                          type: string
                        name:
                          maxLength: 64
                          minLength: 1
                          type: string
                      required:
                      - name
                      - defaultState
                      type: object
                '@namespaces':
                  boardgame:
                    name: /boardgame/
                defaultState: 1---------
                name: tictactoe
        '404':
          description: Game type not found